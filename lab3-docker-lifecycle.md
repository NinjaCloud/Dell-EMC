# LAB-3: Docker Lifecycle

## Task 1: Docker Lifecycle

### Step 1: Pulling an Image
```bash
docker pull httpd
```
This command downloads the **httpd (Apache HTTP Server)** image from the Docker Hub repository to your local system.

### Step 2: Listing Downloaded Images
```bash
docker image ls
```
This lists all Docker images available locally, including their **IMAGE ID, TAG, SIZE, and REPOSITORY** name.

### Step 3: Viewing Image History
```bash
docker image history httpd
```
Displays the history of the **httpd** image, showing the layers used to build the image.

### Step 4: Creating a Container Without Running It
```bash
docker container create httpd
```
Creates a stopped container from the **httpd** image without running it immediately.

### Step 5: Listing All Containers
```bash
docker container ls -a
```
Lists all containers, whether running or stopped.

### Step 6: Starting the Container
```bash
docker container start <container_id/name>
```
Starts the previously created container. Replace `<container_id/name>` with the actual **container ID** or **name**.

### Step 7: Checking Running Containers
```bash
docker container ls
```
Shows only actively running containers.

### Step 8: Stopping the Running Container
```bash
docker container stop <container_id/name>
```
Stops the running container.

### Step 9: Listing Containers Again
```bash
docker container ls -a
```
Displays all containers, including the one that was stopped.

### Step 10: Restarting the Stopped Container
```bash
docker container start <container_id/name>
```
Starts the stopped container again.

### Step 11: Pausing the Running Container
```bash
docker container pause <container_id/name>
```
Pauses all processes inside the container.

### Step 12: Checking the Container Status
```bash
docker container ls -a
```
Lists all containers. The paused container will show a **Paused** status.

### Step 13: Unpausing the Container
```bash
docker container unpause <container_id/name>
```
Resumes all processes inside the paused container.

### Step 14: Checking the Container Status Again
```bash
docker container ls -a
```
Lists all containers. The container should now be **running**.

### Step 15: Accessing the Container’s Shell
```bash
docker exec -it <container_id/name> bash
```
Accesses the running container's shell in an interactive terminal mode.

### Step 16: Navigating to htdocs Directory
```bash
cd htdocs
```
Moves into the Apache server's root directory where web files are stored.

### Step 17: Updating Packages Inside the Container
```bash
apt update
```
Updates the package lists inside the container.

### Step 18: Installing wget Utility
```bash
apt install wget -y
```
Installs the `wget` package without prompting for user confirmation.

### Step 19: Removing Default Index Page
```bash
rm index.html
```
Deletes the existing **index.html** file in the `htdocs` directory.

### Step 20: Creating a New Web Page
```bash
echo "Welcome to Docker Training" > index.html
```
Creates a new **index.html** file containing the message: "Welcome to Docker Training".

### Step 21: Exiting the Container
```bash
exit
```
Closes the container shell session and returns to the host machine.

### Step 22: Committing the Container Changes
```bash
docker commit <container_id/name> myhttpd:version1
```
Creates a new custom Docker image **myhttpd:version1** with the changes made inside the container.

### Step 23: Listing Docker Images
```bash
docker image ls
```
Displays the newly created image **myhttpd:version1** along with other existing images.

### Step 24: Running a Container from the New Image
```bash
docker run -d -p 8080:80 myhttpd:version1
```
Runs a container from the **myhttpd:version1** image in detached mode (`-d`) and maps port **8080 on the host** to **port 80 inside the container**.

### Step 25: Testing the Web Server
```bash
curl <public_IP>:8080
```
Sends a request to the running container’s Apache web server. If successful, it will return **"Welcome to Docker Training"**.

### Step 26: Checking Running Containers
```bash
docker container ls
```
Lists all currently running containers.

### Step 27: Viewing Container Logs
```bash
docker logs <container_id/name>
```
Displays logs generated by the running container.

### Step 28: Monitoring Container Performance
```bash
docker stats <container_id/name>
```
Shows real-time resource usage statistics of the running container.

### Step 29: Stopping the Running Container
```bash
docker stop <container_id/name>
```
Stops the running container.

### Step 30: Removing the Stopped Container
```bash
docker container rm <container_id/name>
```
Deletes the stopped container permanently.

### Step 31: Listing Available Images
```bash
docker image ls
```
Lists all available Docker images.

### Step 32: Removing Unused Images
```bash
docker image rm <image_id/name> <image_id/name>
```
Deletes the specified images. Replace `<image_id/name>` with actual **image IDs or names**.

### Step 33: Checking Remaining Images
```bash
docker image ls
```
Lists remaining Docker images.

### Step 34: Listing All Images, Including Dangling Ones
```bash
docker image ls -a
```
Shows all images, including unused or **dangling** images.

---

### Conclusion
This lab provided a hands-on walkthrough of the **Docker container lifecycle**, covering:
1. **Image management** (pulling, listing, inspecting, and removing images).
2. **Container operations** (creating, starting, stopping, pausing, resuming, and deleting containers).
3. **Modifying containers** (executing commands inside containers, installing packages, modifying files).
4. **Saving container state** by committing changes to a new Docker image.
5. **Running and testing a custom-built containerized web application.**
6. **Monitoring and logging container activities.**

This workflow ensures you understand how Docker manages containers efficiently from creation to removal.

